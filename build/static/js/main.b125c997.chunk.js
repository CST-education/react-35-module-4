(this["webpackJsonpreact-35-module-4"]=this["webpackJsonpreact-35-module-4"]||[]).push([[0],{18:function(e,t,n){e.exports={backDrop:"Modal_backDrop__Wadwt",content:"Modal_content__P_okn"}},34:function(e,t,n){},38:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(12),s=n.n(a),o=(n(34),n(9)),i=n(3),l=function(e,t){var n=Object(c.useState)((function(){var n;return null!==(n=JSON.parse(localStorage.getItem(e)))&&void 0!==n?n:t})),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(a))}),[e,a]),[a,s]},u=n(4),d=n(5),h=n(15),j=n(14),b=n(6),p=(n(38),n(0));function O(e){var t=e.unitRef,n=e.isOpen,c=e.toggleState,r=e.keydownHandler,a=e.handleClick,s=e.handleDelete,o=e.textObj,i=o.title,l=o.content,u=o.backBtn,d=o.deleteBtn;return Object(p.jsx)(b.a,{flipId:"wrapper",children:Object(p.jsxs)("div",{ref:t,tabIndex:n?void 0:0,role:"dialog",className:"dialog animated-in",onClick:c,onKeyDown:r,children:[Object(p.jsx)("p",{className:"title content",children:i}),Object(p.jsx)("p",{className:"content",children:l}),Object(p.jsx)("button",{className:"button secondary content",onClick:a,children:u}),Object(p.jsx)("button",{className:"button primary content",onClick:s,children:d})]})})}O.defaultProps={textObj:{title:"Delete this item?",content:"This operation will permenantly delete this item and all its dependencies. This actioncannot be undone",backBtn:"Oh no, bring me back",deleteBtn:"I understand, delete it"}};var f=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isOpen:e.props.isOpen},e.ref=Object(c.createRef)(),e.toggleState=function(){e.state.isOpen||(e.setState((function(e){return{isOpen:!e.isOpen}})),e.ref.current.focus())},e.keydownHandler=function(t){"Enter"!==t.key&&"Escape"!==t.key||e.toggleState()},e.handleClick=function(){return e.setState({isOpen:!1})},e.handleDelete=function(){e.props.onDelete(e.props.id),e.setState({isOpen:!1})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.isOpen,t=this.ref,n=this.keydownHandler,c=this.toggleState,r=this.handleClick,a=this.handleDelete;return Object(p.jsx)(b.b,{flipKey:e,spring:"stiff",stagger:!0,children:e?Object(p.jsx)(O,{unitRef:t,isOpen:e,toggleState:c,keydownHandler:n,handleClick:r,handleDelete:a,textObj:this.props.text}):Object(p.jsx)(b.a,{flipId:"wrapper",children:Object(p.jsx)("div",{ref:t,tabIndex:0,role:"button",className:"button primary",onClick:c,onKeyDown:n,children:Object(p.jsx)(b.a,{flipId:"action",children:Object(p.jsx)("span",{className:"action",children:"Delete"})})})})})}}]),n}(c.Component);function g(e){var t=e.products,n=e.onDeleteProduct;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Product List"}),Object(p.jsx)("ul",{children:t.map((function(e){return Object(p.jsxs)("li",{children:[Object(p.jsx)("h3",{children:e.title}),Object(p.jsx)("p",{children:e.description}),Object(p.jsx)(f,{onDelete:n,id:e.id})]},e.id)}))})]})}var x=n(18),m=n.n(x);function v(e){var t=e.children,n=e.toggleModal;Object(c.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){var t="Escape"===e.code;console.log(t),t&&n()};return Object(a.createPortal)(Object(p.jsx)("div",{className:m.a.backDrop,onClick:function(e){e.currentTarget===e.target&&n()},children:Object(p.jsx)("div",{className:m.a.content,children:t})}),document.getElementById("modalRoot"))}var k=n(28),y=n(8),S=n(62),w=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).prodIdtitle=Object(S.a)(),e.prodIdDesc=Object(S.a)(),e.prodIdSize=Object(S.a)(),e.prodIdokGoogle=Object(S.a)(),e.state={title:"",desc:"",size:"",okGoogle:!1,product:null},e.handleCheck=function(t){var n=t.target,c=n.name,r=n.checked,a=e.state.okGoogle;console.log("name:",c),console.log("checked:",r),e.setState({okGoogle:!a})},e.handleChange=function(t){var n=t.target,c=n.name,r=n.value;e.setState(Object(y.a)({},c,r))},e.handleChangeAllInputs=function(t){var n=t.target,c=n.name,r=n.type,a=n.checked,s=n.value;e.setState(Object(y.a)({},c,"checkbox"===r?a:s))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,c=n.title,r=n.desc,a=n.size,s={id:Object(S.a)(),title:c,description:r,size:a};e.setState({product:s}),e.props.addNewProduct(s),e.resetForm()},e.resetForm=function(){e.setState(Object(k.a)({},e.state))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.desc,c=e.size,r=e.okGoogle,a=this.handleChangeAllInputs,s=this.handleSubmit,o=this.prodIdtitle,i=this.prodIdDesc,l=this.prodIdSize,u=this.prodIdokGoogle;return Object(p.jsxs)("form",{onSubmit:s,children:[Object(p.jsx)("label",{htmlFor:o,children:"Title"}),Object(p.jsx)("input",{type:"text",id:o,name:"title",value:t,onChange:a}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{htmlFor:i,children:"Description"}),Object(p.jsx)("input",{type:"text",id:i,name:"desc",value:n,onChange:a}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{htmlFor:l,children:"Choose your size"}),Object(p.jsxs)("select",{name:"size",value:c,onChange:a,id:l,children:[Object(p.jsx)("option",{value:"",disabled:!0,children:"..."}),Object(p.jsx)("option",{value:"s",children:"s"}),Object(p.jsx)("option",{value:"m",children:"m"}),Object(p.jsx)("option",{value:"l",children:"l"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("label",{htmlFor:u,children:"Agree?"}),Object(p.jsx)("input",{type:"checkbox",name:"okGoogle",id:u,checked:r,onChange:a}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",disabled:!r,children:"add"})]})}}]),n}(c.Component);function P(e){var t=e.getSearchValues,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(5),l=Object(i.a)(o,2),u=l[0],d=l[1],h=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"searchValue":s(c);break;case"perPage":d(c)}};return Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("BEFORE FETCH",a,u),t(a,u),s("")},children:[Object(p.jsx)("input",{type:"text",name:"searchValue",value:a,onChange:h,placeholder:"Value"}),Object(p.jsx)("input",{type:"number",name:"perPage",value:u,onChange:h,placeholder:"how many results?"}),Object(p.jsx)("button",{type:"submit",children:"search"})]})}var C=n(19),_=n.n(C),I=n(29),D=n(16),E=n.n(D),N=function(){function e(t,n){Object(u.a)(this,e),this.base_url=t,this.api_key=n,this._searchQuery="",this._page=1,this._perPage=5,this.endPoint=""}return Object(d.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"perPage",get:function(){return this._perPage},set:function(e){return this._perPage=e}},{key:"searchPhotos",value:function(){var e=Object(I.a)(_.a.mark((function e(){var t,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.a.defaults.baseURL=this.base_url,E.a.defaults.headers.common.Authorization=this.api_key,this.endPoint="search",console.log("searchQuery:",this.searchQuery,"page:",this.page,"perPage:",this.perPage),t="?query=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.perPage),n=this.endPoint+t,e.prev=6,e.next=9,E.a.get(n);case 9:if(c=e.sent,r=c.data.photos,400!==c.status){e.next=13;break}throw new Error;case 13:if(console.log(r),200!==c.status){e.next=16;break}return e.abrupt("return",r);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(6),e.abrupt("return",e.t0.message);case 21:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),F=new N("https://api.pexels.com/v1/","563492ad6f91700001000001390f9fee0a794c1182a72e49e0e0eae2");function A(e){var t=e.searchValue,n=e.perPage,r=l("pexelImages",[]),a=Object(i.a)(r,2),s=a[0],u=a[1],d=Object(c.useState)("init"),h=Object(i.a)(d,2),j=h[0],b=h[1];Object(c.useEffect)((function(){t.trim()&&(b("pending"),F.resetPage(),F.searchQuery=t,F.perPage=n,F.searchPhotos().then((function(e){b("success"),u(e)})).catch((function(e){console.log(e),b("error")})))}),[t,n,u]);return"init"===j?Object(p.jsx)("h1",{children:"Hello! Search something"}):"pending"===j?Object(p.jsx)("h1",{children:"Wait please!"}):"success"===j?(console.log("success",s),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("ul",{style:{display:"flex",flexFlow:"row wrap"},children:s.length>0&&s.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("img",{src:e.src.tiny,alt:e.photographer})},e.id)}))}),Object(p.jsx)("button",{type:"button",onClick:function(){F.page=1,F.searchPhotos().then((function(e){u((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e))})),console.log("setSearchResults",e),b("success")})).catch((function(e){b("error")}))},children:"load more"})]})):"error"===j?Object(p.jsx)("h1",{children:"ALARMA!!!"}):void 0}n(59);var z=function(){var e=l("products",[]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(i.a)(a,2),u=s[0],d=s[1],h=Object(c.useState)(""),j=Object(i.a)(h,2),b=j[0],O=j[1],f=Object(c.useState)(5),x=Object(i.a)(f,2),m=x[0],k=x[1],y=function(){return d(!u)};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(P,{getSearchValues:function(e,t){O(e),k(t)}}),Object(p.jsx)(A,{searchValue:b,perPage:m}),u&&Object(p.jsx)(v,{toggleModal:y,children:Object(p.jsx)(w,{addNewProduct:function(e){return r((function(t){return[].concat(Object(o.a)(t),[e])}))}})}),Object(p.jsx)("h1",{children:"FE-35 Product"}),Object(p.jsx)("button",{type:"button",onClick:y,children:"Add Product"}),Object(p.jsx)(g,{products:n,onDeleteProduct:function(e){return r((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.b125c997.chunk.js.map